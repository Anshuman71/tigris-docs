import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

# Getting Started

## Prerequisites

The Tigris client is compatible with Node version 12 onwards.

## Installation

```shell
npm install @tigrisdata/core
```

## Create Connection

<Tabs>
<TabItem value="Tigris Cloud" label="Tigris Cloud">

Tigris server URL, ClientID and ClientSecret need to be set as follows,
in order to connect to the hosted platform:

```typescript
const tigris: Tigris = new Tigris({
  serverUrl: "api.preview.tigrisdata.cloud",
  clientId: "paste client_id here",
  clientSecret: "paste client_secret here",
});
```

The ClientID and ClientSecret can be retrieved by creating an application
in the [CLI](../cli/authentication.md#application-credentials) or UI.

</TabItem>
<TabItem value="Development Environment" label="Development Environment">

For local development only URL pointing to the localhost is required:

```typescript
const tigris: Tigris = new Tigris({
  serverUrl: "localhost:8081",
});
```

</TabItem>
</Tabs>

## Set up the data model

Tigris client uses interface for data container and developers define the schema
of their data container using TigrisSchema

```typescript title=DataContainer
interface Review extends TigrisCollectionType {
  author: string;
  rating: number;
}

interface Catalog extends TigrisCollectionType {
  id?: number;
  name: string;
  price: number;
  brand: string;
  labels: string;
  popularity: number;
  review: Review;
  attributes: object;
}
```

```typescript title=SchemaDefinition
const reviewSchema: TigrisSchema<Review> = {
  author: {
    type: TigrisDataTypes.STRING,
  },
  rating: {
    type: TigrisDataTypes.NUMBER,
  },
};

const catalogSchema: TigrisSchema<Catalog> = {
  id: {
    type: TigrisDataTypes.INT32,
    primary_key: {
      order: 1,
      autoGenerate: true,
    },
  },
  name: {
    type: TigrisDataTypes.STRING,
  },
  price: {
    type: TigrisDataTypes.NUMBER,
  },
  brand: {
    type: TigrisDataTypes.STRING,
  },
  labels: {
    type: TigrisDataTypes.STRING,
  },
  popularity: {
    type: TigrisDataTypes.INT32,
  },
  reviews: {
    type: reviewSchema,
  },
  attributes: {
    type: TigrisDataTypes.OBJECT,
  },
};
```

For detailed documentation on schema representation refer to the
[data modeling](documents/datamodel) section.

## Create Database, Collections and Topics

### 1. Create database (if not exists)

```typescript
const db: DB = await tigris.createDatabaseIfNotExists("catalogdb");
```

### 2. Create collection

```typescript
const catalog: Collection<Catalog> = await db.createOrUpdateCollection(
  "catalog",
  catalogSchema
);
```

### 3. Create topic

```typescript
const topic: Topic<ProductEvents> = await db.createOrUpdateTopic(
  "product_events",
  productEventsSchema
);
```
