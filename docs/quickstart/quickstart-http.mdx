import TigrisCloud from "../includes/_tigris_cloud.mdx";
import StartupLocally from "../includes/_startup_tigris_locally.mdx";
import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

# Quickstart: HTTP

Tigris is the all-in-one open source developer data platform.

:::tip Features

- ü™ó Use it as a scalable transactional document store.
- ü§ñ Query all your data without worrying about slow queries due to missing
  indexes.
- üîç Perform real-time search across your data stores automatically.
- üîÄ Build event-driven apps with real-time event streaming.

_All provided to you through a unified serverless API enabling you
to focus on building applications and stop worrying about the data
infrastructure._

:::

The following guide will get you up and running with Tigris. It covers
creating database and collection, writing queries to read and write data,
and performing search all without touching any infrastructure.

## Setup Tigris

<Tabs>
<TabItem value="cloud" label="Tigris Cloud">

<TigrisCloud />

</TabItem>

<TabItem value="dev" label="Development Environment">

<StartupLocally />

</TabItem>
</Tabs>

## Quickstart

### Prerequisites

All you'll need is any computer running macOS or Linux.

### Creating database and collection

For this quickstart we will create a database named _sampledb_ and then
create a collection _users_ inside it.

Creating a database is as easy as calling an API, and it is ready in an
instant.

```shell
curl -X POST http://localhost:8081/v1/databases/sampledb/create
```

Similarly, a collection is instantaneously created through the API. In
Tigris, a collection is an ordered set of records called documents that all
follow a specific schema and whose fields are strongly typed.

```shell
curl http://localhost:8081/v1/databases/sampledb/collections/users/createOrUpdate \
      -X POST \
      -H "Content-Type: application/json" \
      -d '{
        "schema": {
          "title": "users",
          "properties": {
            "balance": {
              "type": "number"
            },
            "id": {
              "type": "integer",
              "format": "int32",
              "autoGenerate": true
            },
            "name": {
              "type": "string"
            }
          },
          "primary_key": [
            "id"
          ]
        }
      }'
```

The schema of the collections created above can be fetched as follows

```shell
curl -X POST http://localhost:8081/v1/databases/sampledb/collections/users/describe
```

### Insert some documents

The following example will replace documents with the same `id` if they
already exist, or create new documents if they don't exist with the same `id`.

```shell
curl http://localhost:8081/v1/databases/sampledb/collections/users/documents/insert \
      -X POST \
      -H "Content-Type: application/json" \
      -d '{
        "documents": [
          {"name": "Jania McGrory", "balance": 6045.7},
          {"name": "Bunny Instone", "balance": 2948.87}
        ]
      }'
```

### Read a document using the primary key field

Read the document from the collection by using its `id`.

```shell
curl http://localhost:8081/v1/databases/sampledb/collections/users/documents/read \
      -X POST \
      -H "Content-Type: application/json" \
      -d '{
        "filter": {"id": 1}
      }'
```

### Read a document using any field in the schema

Read the document from the collection by using the field `name`.

```shell
curl http://localhost:8081/v1/databases/sampledb/collections/users/documents/read \
      -X POST \
      -H "Content-Type: application/json" \
      -d '{
        "filter": {"name": "Jania McGrory"}
      }'
```

### Update a document

Update one of the fields in a document by using its `id`.

```shell
curl http://localhost:8081/v1/databases/sampledb/collections/users/documents/update \
      -X PUT \
      -H "Content-Type: application/json" \
      -d '{
        "fields": {
          "$set": {"balance": 2448.87}
        },
        "filter": {"id": 2}
      }'
```

### Search

Search for users with `name` like "bunny" and `balance` greater than 500

```shell
curl http://localhost:8081/v1/databases/sampledb/collections/users/documents/search \
      -X POST \
      -H "Content-Type: application/json" \
      -d '{
        "q": "bunny",
        "search_fields": ["name"],
        "filter": {"balance": {"$gt": 500}}
      }'
```

### Delete documents

Use the delete API to remove the documents from the collection
based on the filter.

```shell
curl http://localhost:8081/v1/databases/sampledb/collections/users/documents/delete \
      -X DELETE \
      -H "Content-Type: application/json" \
      -d '{
        "filter": {
          "$or": [
            {"id": 1},
            {"id": 2}
          ]
        }
      }'
```

### Drop database

Finally, drop the database _sampledb_ we have created for this quickstart
with all its collections.

```shell
curl -X DELETE http://localhost:8081/v1/databases/sampledb/drop
```

## Where to go from here?

Browse through the docs in your own areas of interest, or join our
[Slack Community](https://join.slack.com/t/tigrisdatacommunity/shared_invite/zt-16fn5ogio-OjxJlgttJIV0ZDywcBItJQ)
to ask any questions you might have.

üöÄ [Signup](https://www.tigrisdata.com/beta) for the
private beta of Tigris Cloud - a fully managed version of Tigris, and try
out the open source developer data platform in the cloud.
